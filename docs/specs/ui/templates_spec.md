# UI模板规范

## 目的
详细描述Web界面模板的结构和功能，包含主界面和配置管理界面。

## 主界面模板 (main.html)

### 页面结构
- 顶部导航栏：显示应用标题和设置按钮
- 左侧区域：工作目录浏览和文件选择
- 右侧区域：任务管理、进度显示和实时日志

### 页面功能

#### 工作目录设置
- 提供输入框供用户设置工作目录路径
- 通过"浏览"按钮确认目录设置
- 页面加载时自动获取当前工作目录设置

#### 文件目录树浏览
- 以树形结构展示工作目录中的文件和子目录
- 根据文件扩展名显示不同图标（支持.eml, .msg, .xlsx, .xls, .csv, .txt, .pdf, .docx, .doc, .json）
- 点击目录可切换浏览内容
- 点击文件可选择/取消选择，选中文件会高亮显示

#### 任务管理
- "开始处理"按钮用于启动处理任务
- 当前任务区域显示处理进度、状态和控制按钮
- 历史任务区域保存已完成的任务记录
- 实时日志显示处理过程中的信息

#### 实时通信机制
- 使用fetch API连接到流式任务处理端点
- 通过JavaScript Stream API读取服务端发送的进度更新
- 解析不同类型的消息（任务信息、状态更新、进度更新、完成、错误）
- 动态更新UI界面以反映任务状态和进度

### 前端技术实现
- 使用Bootstrap 5实现响应式设计
- 使用Font Awesome提供图标支持
- 原生JavaScript处理DOM操作和事件监听
- 使用ES6 Fetch API实现与后端的通信
- 使用JavaScript Streams API处理服务器发送的事件流

### 样式设计
- 自定义CSS变量定义主题颜色
- 使用CSS Grid和Flexbox布局
- 自定义卡片、表单元素和按钮样式
- 实现视觉反馈效果（悬停、激活状态）

## 配置管理界面 (info_item.html)

### 页面结构
- 顶部操作栏：包含导入配置、导出配置、批量操作、预览SQL等按钮
- 左侧区域：配置项列表（可搜索、可排序）
- 右侧区域：配置项编辑表单和预览区域

### 页面功能

#### 配置项管理
- 展示所有配置项的列表（ID、标准表头、数据类型、说明、排序号、操作）
- 支持搜索功能，可在标准表头、说明、数据类型中搜索
- 支持拖拽排序功能，使用Sortable.js库实现

#### 配置项操作
- 增加新配置项：点击"新增配置项"按钮，清空表单并切换到添加模式
- 编辑配置项：点击编辑按钮或表格行，将配置项数据显示到编辑表单
- 删除配置项：点击删除按钮，在确认后从列表中移除

#### 表单功能
- 包含标准表头、说明/同义词、数据类型、排序号、样本字段名等字段
- 必填字段验证（标准表头和数据类型）
- 重置功能：将表单恢复到当前编辑项的值
- 清空功能：清空所有表单字段

#### 批量操作
- 重置排序号：将所有配置项的排序号按当前顺序重置
- 清空空值字段：将所有配置项的空值字段设为空字符串
- 导出SQL文件：生成SQL映射语句并导出

#### 预览功能
- SQL预览：根据当前配置生成示例SQL语句
- AI提示词预览：根据当前配置生成AI处理提示词

### 前端技术实现
- 使用Bootstrap 5实现响应式设计
- 使用Bootstrap Icons提供图标支持
- 使用Sortable.js实现拖拽排序功能
- 使用SweetAlert2 provide user feedback
- 使用Select2优化下拉选择框
- 原生JavaScript处理业务逻辑
- jQuery用于简化DOM操作

### 样式设计
- 自定义CSS变量定义主题颜色
- 使用Grid layout实现主容器
- 自定义表格、表单元素和卡片样式
- 响应式设计适配不同屏幕尺寸

## 共同特性

### 响应式设计
- 支持桌面端和移动端显示
- 在小屏幕设备上调整布局以优化用户体验

### 用户体验
- 提供即时反馈（Toast messages）
- 操作确认（delete confirmations）
- 清晰的状态显示（task status, progress bars）
- 直观的视觉设计